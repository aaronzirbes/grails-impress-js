<!DOCTYPE html>
<!-- saved from url=(0061)http://localhost:8080/impress-js/presentation/show/1#/slide-2 -->
<html lang="en" class="no-js" style="height: 100%; "><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>Grails Acegi to Spring Security</title>
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet">
		
		
		<meta name="layout" content="impress">
		
		<meta name="description" content="Converting a Grails Application from Acegi to Spring Security">
		<meta name="author" content="ajz@umn.edu">
	
		<link href="./example-grails-impress-js_files/bundle-bundle_impress_head.css" type="text/css" rel="stylesheet" media="screen, projection">

	</head>
	<body style="height: 100%; overflow-x: hidden; overflow-y: hidden; ">
		
		<div id="impress" class="step-slide-2" style="position: absolute; -webkit-transform-origin-x: 0%; -webkit-transform-origin-y: 0%; -webkit-transition-property: all; -webkit-transition-timing-function: ease-in-out; -webkit-transform-style: preserve-3d; top: 50%; left: 50%; -webkit-perspective: 1000px; -webkit-transform: scale(1); -webkit-transition-duration: 0ms; -webkit-transition-delay: 500ms; "><div class="canvas" style="position: absolute; -webkit-transform-origin-x: 0%; -webkit-transform-origin-y: 0%; -webkit-transition-property: all; -webkit-transition-timing-function: ease-in-out; -webkit-transform-style: preserve-3d; -webkit-transform: rotateZ(-3deg) rotateY(0deg) rotateX(0deg) translate3d(0px, 0px, 0px); -webkit-transition-duration: 0ms; -webkit-transition-delay: 0ms; ">
			<div class="fallback-message">
				<p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
				<p>For the best experience please use the latest <b>Chrome</b> or <b>Safari</b> browser. Firefox 10 (to be released soon) will also handle it.</p>
			</div>
			<div id="slide-2" class="step slide active" data-x="0" data-y="0" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="3" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(3deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="font-size:220%; line-height:150%;">
	Replacing <strong>Acegi</strong> with <strong>Spring Security</strong> in a Grails 1.3.x application</p>
<p style="font-size: 220%; line-height: 150%; text-align: right; ">
	<img alt="" src="./example-grails-impress-js_files/grails_logo.png" style="width: 300px; height: 90px; transform:rotate(7deg);
-ms-transform:rotate(7deg);
-moz-transform:rotate(7deg);
-webkit-transform:rotate(7deg);
-o-transform:rotate(7deg);"></p>
<div class="slide-num">1</div></div>
<div id="slide-3" class="step slide" data-x="1000" data-y="0" data-z="0" data-rotate-x="0" data-rotate-y="-20" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(1000px, 0px, 0px) rotateX(0deg) rotateY(-20deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	<span style="font-size:200%; line-height: 200%;"><strong>Every app</strong> has some cleaning to do first!</span></p>
<div class="slide-num">2</div></div>
<div id="slide-4" class="step slide" data-x="1000" data-y="1000" data-z="-3" data-rotate-x="30" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(1000px, 1000px, -3px) rotateX(30deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	Is the database structure up to spec?</p>
<p>
	<code>dbCreate = 'validate'</code></p>
<div class="slide-num">3</div></div>
<div id="slide-5" class="step slide" data-x="0" data-y="1000" data-z="0" data-rotate-x="12" data-rotate-y="0" data-rotate-z="9" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 1000px, 0px) rotateX(12deg) rotateY(0deg) rotateZ(9deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="text-align: center; ">
	Is the SCM folder clean?</p>
<p style="text-align: center; ">
	&nbsp;</p>
<p>
	<strong>Remove</strong></p>
<p style="text-align: right; ">
	<code>.target<br>
	.classpath </code></p>
<p>
	<strong>Keep</strong></p>
<p style="text-align: right; ">
	<code>.project<br>
	.settings</code></p>
<div class="slide-num">4</div></div>
<div id="slide-6" class="step slide" data-x="0" data-y="2000" data-z="0" data-rotate-x="0" data-rotate-y="8" data-rotate-z="1" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 2000px, 0px) rotateX(0deg) rotateY(8deg) rotateZ(1deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	&nbsp;</p>
<p>
	Make sure that <strong>grails test-app</strong> and <strong>grails run-app</strong> works.</p>
<p>
	&nbsp;</p>
<p style="text-align: right; ">
	Don't blame</p>
<p style="text-align: right; ">
	<em>the upgrade</em></p>
<p style="text-align: right; ">
	if</p>
<p style="text-align: right; ">
	<em>the app was broken</em></p>
<p style="text-align: right; ">
	before hand!</p>
<div class="slide-num">5</div></div>
<div id="slide-7" class="step slide" data-x="1000" data-y="2000" data-z="0" data-rotate-x="-5" data-rotate-y="0" data-rotate-z="-2" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(1000px, 2000px, 0px) rotateX(-5deg) rotateY(0deg) rotateZ(-2deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="margin-top:2em;">
	Remove <strong>umn-acegi</strong> from&nbsp;<strong>application.properties</strong></p>
<p style="margin-top:2em;font-size: 130%;">
	Add the spring-security-* plugins to BuildConfig.groovy.</p>
<p style="margin-top:2em;font-size: 90%;">
	... this is the new and recommended way to add plugins to your grails application.</p>
<div class="slide-num">6</div></div>
<div id="slide-8" class="step slide" data-x="2000" data-y="2000" data-z="0" data-rotate-x="0" data-rotate-y="10" data-rotate-z="-5" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(2000px, 2000px, 0px) rotateX(0deg) rotateY(10deg) rotateZ(-5deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	Spring Security Core Documenation will tell you that...</p>
<p style="font-size:200%; line-height: 2em;">
	many of the changes are covered <a href="http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/2%20Differences%20Between%20the%20Spring%20Security%20and%20Acegi%20Plugins.html">here</a>.</p>
<div class="slide-num">7</div></div>
<div id="slide-9" class="step slide" data-x="2000" data-y="1000" data-z="0" data-rotate-x="10" data-rotate-y="0" data-rotate-z="-13" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(2000px, 1000px, 0px) rotateX(10deg) rotateY(0deg) rotateZ(-13deg) scale(1); -webkit-transform-style: preserve-3d; "> <div>
	<p style="font-size: 120%; margin: 1.5em;">
		The first to change is the <strong>import</strong> for the <strong>@Secured</strong> annotations.</p>
	<pre style="color: rgb(0, 0, 0); text-align: left; background-color: rgb(247, 248, 242); "><span class="java-keyword" style="font-weight: bold; color: rgb(0, 0, 139); ">import</span> org.codehaus.groovy.grails.plugins.springsecurity.Secured</pre>
	<div style="font-size: 120%; margin: 1.5em;">
		becomes</div>
	<div>
		<pre style="background-color: rgb(247, 248, 242); color: rgb(0, 0, 0); text-align: left; "><span class="java-keyword" style="font-weight: bold; color: rgb(0, 0, 139); ">import</span> grails.plugins.springsecurity.Secured</pre>
		<div>
			&nbsp;</div>
	</div>
</div>
<div class="slide-num">8</div></div>
<div id="slide-10" class="step slide" data-x="3000" data-y="1000" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-6" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(3000px, 1000px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(-6deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="font-size: 200%; line-height:200%; margin-bottom: 1em;">
	Next up is the reference to the Security Service</p>
<p>
	the old</p>
<p style="text-align: right; ">
	<strong>authenticateService</strong></p>
<p>
	is now</p>
<p style="text-align: right; ">
	<strong>springSecurityService</strong></p>
<div class="slide-num">9</div></div>
<div id="slide-11" class="step slide" data-x="4000" data-y="1000" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-15" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(4000px, 1000px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(-15deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>Tags!</p>
<p style="font-size:200%; text-align:right; margin:1em; line-height:200%;">&lt;g:ifAnyGranted&gt;</p>
<p style="font-size:200%; text-align:left; margin:1em; line-height:200%;">&lt;g:ifAllGranted&gt;</p>

<p style="font-size:200%; text-align:center; margin:1em; line-height:200%;">&lt;g:isLoggedIn&gt;</p>
<div class="slide-num">10</div></div>
<div id="slide-12" class="step slide" data-x="4000" data-y="1000" data-z="-2000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-12" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(4000px, 1000px, -2000px) rotateX(0deg) rotateY(0deg) rotateZ(-12deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	Tags!</p>
<p style="font-size:200%; text-align:right; margin:1em; line-height:200%;">
	&lt;sec:ifAnyGranted&gt;</p>
<p style="font-size:200%; text-align:left; margin:1em; line-height:200%;">
	&lt;sec:ifAllGranted&gt;</p>
<p style="font-size:200%; text-align:center; margin:1em; line-height:200%;">
	&lt;sec:isLoggedIn&gt;</p>
<div class="slide-num">11</div></div>
<div id="slide-13" class="step slide" data-x="4000" data-y="2000" data-z="-1000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(4000px, 2000px, -1000px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="text-align: center; margin-top:8em;">
	<span style="font-size:200%; font-family:courier new,courier,monospace;">grails test-app</span></p>
<div class="slide-num">12</div></div>
<div id="slide-14" class="step slide" data-x="4000" data-y="2000" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(4000px, 2000px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="text-align: center; margin-top:8em;">
	<span style="font-size:200%; font-family:courier new,courier,monospace;">grails run-app</span></p>
<div class="slide-num">13</div></div>
<div id="slide-15" class="step slide" data-x="4000" data-y="2000" data-z="1000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(4000px, 2000px, 1000px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="text-align: center; margin-top:8em;">
	<span style="font-size:200%; font-family:courier new,courier,monospace;">grails prod run-app</span></p>
<div class="slide-num">14</div></div>
<div id="slide-16" class="step slide" data-x="3000" data-y="2000" data-z="1000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-8" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(3000px, 2000px, 1000px) rotateX(0deg) rotateY(0deg) rotateZ(-8deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	<strong>Configuration Changes</strong></p>
<ul>
	<li>
		Now <em>host dependent</em></li>
	<li>
		Stored <strong>External</strong> to the Application</li>
	<li>
		Stored in <strong>SVN</strong></li>
	<li>
		<strong>Commits</strong> to SVN will update the Application Server</li>
	<li>
		<strong>Config.groovy </strong>is now minimalistic</li>
</ul>
<div class="slide-num">15</div></div>
<div id="slide-17" class="step slide" data-x="3000" data-y="1000" data-z="1000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-8" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(3000px, 1000px, 1000px) rotateX(0deg) rotateY(0deg) rotateZ(-8deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	<strong>Configuration Locations</strong></p>
<p style="line-height:150%;">
	<em>the repo</em></p>
<p>
	https://svn.cccs.umn.edu/svn/grails/config/</p>
<p style="line-height:150%; text-align: center; ">
	<em>the folders</em></p>
<p style="text-align: right; ">
	<strong>development</strong></p>
<p style="text-align: right; ">
	<strong>staging</strong></p>
<p style="text-align: right; ">
	<strong>production</strong></p>
<p>
	&nbsp;</p>
<div class="slide-num">16</div></div>
<div id="slide-18" class="step slide" data-x="2000" data-y="2000" data-z="1000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-9" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(2000px, 2000px, 1000px) rotateX(0deg) rotateY(0deg) rotateZ(-9deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	No more <strong>DataSource.groovy</strong></p>
<p>
	The new <strong>Config.groovy</strong></p>
<div>
	<span style="font-family:courier new,courier,monospace;">grails.config.locations = [ "file:/etc/grails/active-directory.groovy",</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; "file:/etc/grails/shibboleth.groovy",</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; "file:/etc/grails/mock-config.groovy",</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; "file:/etc/grails/logging-config.groovy",</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; "file:/etc/grails/mail-config.groovy",</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; "file:/etc/grails/zpfour-config.groovy",</span></div>
<div>
	<span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; "file:/etc/grails/${appName}-config.groovy" ]</span></div>
<div>
	&nbsp;</div>
<div class="slide-num">17</div></div>
<div id="slide-19" class="step slide" data-x="2000" data-y="4000" data-z="-1500" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-9" data-scale="2.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(2000px, 4000px, -1500px) rotateX(0deg) rotateY(0deg) rotateZ(-9deg) scale(2); -webkit-transform-style: preserve-3d; "> <div style="font-size:90%; font-weight:bold; background-color:#000000; color:#080; font-family:courier new,courier,monospace;">
	<pre>grails.config.locations = [
    "file:/etc/grails/active-directory.groovy",
    "file:/etc/grails/shibboleth.groovy",
    "file:/etc/grails/mock-config.groovy",
    "file:/etc/grails/logging-config.groovy",
    "file:/etc/grails/mail-config.groovy",
    "file:/etc/grails/zpfour-config.groovy",
    "file:/etc/grails/${appName}-config.groovy" ]

grails.mime.file.extensions = true
grails.mime.use.accept.header = false
grails.mime.types = [ ... ]
grails.views.default.codec="none"
grails.views.gsp.encoding="UTF-8"
grails.converters.encoding="UTF-8"
grails.enable.native2ascii = true
</pre>
</div>
<p>
	&nbsp;</p>
<div class="slide-num">18</div></div>
<div id="slide-20" class="step slide" data-x="2000" data-y="5000" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-12" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(2000px, 5000px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(-12deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	Prep the <strong>Application Server</strong></p>
<p style="text-align: right; ">
	<strong>...in</strong></p>
<p>
	/etc/apache2/sites-enabled/tomcat6-ssl</p>
<p style="text-align: right; ">
	<strong>...add</strong></p>
<p>
	&nbsp;</p>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;Location "/appname"&gt;</span></strong></div>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; AuthType shibboleth</span></strong></div>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; ShibRequestSetting requireSession 1</span></strong></div>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &nbsp; &nbsp; Require valid-user</span></strong></div>
<div>
	<strong><span style="font-family:courier new,courier,monospace;">&nbsp; &nbsp; &lt;/Location&gt;</span></strong></div>
<div style="text-align: right; ">
	...then</div>
<div>
	<span style="font-family:courier new,courier,monospace;"><strong>sudo service apache2 restart</strong></span></div>
<div class="slide-num">19</div></div>
<div id="slide-21" class="step slide" data-x="2000" data-y="4000" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="-17" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(2000px, 4000px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(-17deg) scale(1); -webkit-transform-style: preserve-3d; "> <p>
	Deploy the app.</p>
<p>
	... and most importantly</p>
<div class="slide-num">20</div></div>
<div id="slide-22" class="step slide" data-x="0" data-y="5000" data-z="0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 5000px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="padding:100px; font-size: 300%; text-align: center; ">
	Check</p>
<div class="slide-num">21</div></div>
<div id="slide-23" class="step slide" data-x="0" data-y="5000" data-z="-500" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 5000px, -500px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="padding:100px; font-size: 300%; text-align: center; ">
	The</p>
<div class="slide-num">22</div></div>
<div id="slide-24" class="step slide" data-x="0" data-y="5000" data-z="-1000" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 5000px, -1000px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="padding:100px; font-size: 300%; text-align: center; ">
	Server Logs!</p>
<div class="slide-num">23</div></div>
<div id="slide-25" class="step slide" data-x="0" data-y="5000" data-z="-1500" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(0px, 5000px, -1500px) rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="padding:100px; font-size: 300%; text-align: center; ">
	Where?</p>
<p style="font-size: 150%; text-align: center; ">
	<span style="font-family:courier new,courier,monospace;">/var/log/tomcat6/catalina.out</span></p>
<div class="slide-num">24</div></div>
<div id="slide-26" class="step slide" data-x="-1000" data-y="5000" data-z="-1500" data-rotate-x="0" data-rotate-y="0" data-rotate-z="4" data-scale="1.00" style="position: absolute; -webkit-transform: translate(-50%, -50%) translate3d(-1000px, 5000px, -1500px) rotateX(0deg) rotateY(0deg) rotateZ(4deg) scale(1); -webkit-transform-style: preserve-3d; "> <p style="padding: 120px; font-size: 200%; line-height:200%; color: blue; font-weight: bold; text-align: center; transform:rotate(7deg);
-ms-transform:rotate(7deg);
-moz-transform:rotate(7deg);
-webkit-transform:rotate(7deg);
-o-transform:rotate(7deg);">
	Thank for your patience!</p>
<div class="slide-num">25</div></div>

		</div></div>
		
		<div class="hint"><p>Use a spacebar or arrow keys to navigate</p></div>
		
	
		<script src="./example-grails-impress-js_files/bundle-bundle_impress_defer.js" type="text/javascript"></script>

	

</body></html>